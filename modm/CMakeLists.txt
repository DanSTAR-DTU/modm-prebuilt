# Copyright (c) 2021, Jacob S. Andersen
#
# This file is part of the modm project.
#
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file was autogenerated by the modm cmake builder. Do not modify!

cmake_minimum_required(VERSION 3.15)
include(cmake/ModmConfiguration.cmake)

set_source_files_properties(
  ext/crashcatcher/src/CrashCatcher_armv7m.sx
  src/modm/platform/core/reset_handler.sx
  PROPERTIES LANGUAGE CXX
)

add_library(modm OBJECT
  ext/crashcatcher/src/CrashCatcher.c
  ext/crashcatcher/src/CrashCatcher_armv7m.sx
  ext/gcc/cabi.c
  ext/gcc/cxxabi.cpp
  ext/gcc/new_delete.cpp
  ext/tlsf/tlsf.c
  src/modm/architecture/driver/atomic/flag.cpp
  src/modm/architecture/interface/can.cpp
  src/modm/container/smart_pointer.cpp
  src/modm/io/iostream.cpp
  src/modm/io/iostream_printf.cpp
  src/modm/math/geometry/angle.cpp
  src/modm/math/geometry/vector2.cpp
  src/modm/math/utils/bit_operation.cpp
  src/modm/math/utils/pc/operator.cpp
  src/modm/platform/can/can_1.cpp
  src/modm/platform/can/can_2.cpp
  src/modm/platform/can/can_3.cpp
  src/modm/platform/clock/rcc.cpp
  src/modm/platform/clock/systick_timer.cpp
  src/modm/platform/core/assert.cpp
  src/modm/platform/core/build_id.cpp
  src/modm/platform/core/delay.cpp
  src/modm/platform/core/heap_table.cpp
  src/modm/platform/core/reset_handler.sx
  src/modm/platform/core/startup.c
  src/modm/platform/core/startup_platform.c
  src/modm/platform/core/vectors.c
  src/modm/platform/fault/crashcatcher_dump.cpp
  src/modm/platform/fault/crashcatcher_regions.c
  src/modm/platform/fault/fault_storage.cpp
  src/modm/platform/gpio/enable.cpp
  src/modm/platform/heap/heap_tlsf.cpp
  src/modm/platform/i2c/i2c_master_1.cpp
  src/modm/platform/i2c/i2c_master_2.cpp
  src/modm/platform/i2c/i2c_master_3.cpp
  src/modm/platform/i2c/i2c_master_4.cpp
  src/modm/platform/spi/spi_master_1.cpp
  src/modm/platform/spi/spi_master_2.cpp
  src/modm/platform/spi/spi_master_3.cpp
  src/modm/platform/timer/timer_1.cpp
  src/modm/platform/timer/timer_15.cpp
  src/modm/platform/timer/timer_16.cpp
  src/modm/platform/timer/timer_17.cpp
  src/modm/platform/timer/timer_2.cpp
  src/modm/platform/timer/timer_20.cpp
  src/modm/platform/timer/timer_3.cpp
  src/modm/platform/timer/timer_4.cpp
  src/modm/platform/timer/timer_5.cpp
  src/modm/platform/timer/timer_6.cpp
  src/modm/platform/timer/timer_7.cpp
  src/modm/platform/timer/timer_8.cpp
  src/modm/platform/uart/lpuart_1.cpp
  src/modm/platform/uart/uart_1.cpp
  src/modm/platform/uart/uart_2.cpp
  src/modm/platform/uart/uart_3.cpp
  src/modm/platform/uart/uart_4.cpp
  src/modm/platform/uart/uart_5.cpp
  src/modm/utils/dummy.cpp
)

add_library(modm_warnings INTERFACE)
add_library(modm_options INTERFACE)
add_library(modm_arch_options INTERFACE)

modm_target_config_create(modm modm_arch_options modm_options modm_warnings)

target_include_directories(modm SYSTEM PUBLIC
  ext
  ext/cmsis/core
  ext/cmsis/device
  ext/crashcatcher/include
  src
)

target_link_libraries(modm
  PUBLIC
    modm_arch_options
  PRIVATE
    project_options
    modm_options
    modm_warnings)