<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>modm: Assertions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">modm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Assertions<div class="ingroups"><a class="el" href="group__modm__architecture.html">Architecture Interfaces</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga16bc9b4ebefe47d1417ec75f99b30ee6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#ga16bc9b4ebefe47d1417ec75f99b30ee6">MODM_ASSERTION_HANDLER</a>(handler)</td></tr>
<tr class="separator:ga16bc9b4ebefe47d1417ec75f99b30ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga7737b85c4054dc754b61bf0da7c165fe"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#ga7737b85c4054dc754b61bf0da7c165fe">modm::AssertionHandler</a> = <a class="el" href="group__modm__architecture__assert.html#gaf22c76f51642c50723ba439c5e080726">Abandonment</a>(*)(const char *module, const char *location, const char *failure, uintptr_t context)</td></tr>
<tr class="separator:ga7737b85c4054dc754b61bf0da7c165fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaf22c76f51642c50723ba439c5e080726"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#gaf22c76f51642c50723ba439c5e080726">modm::Abandonment</a> : uint8_t { <a class="el" href="group__modm__architecture__assert.html#ggaf22c76f51642c50723ba439c5e080726a60a3629ef6a8f991f45d7a85f2458544">modm::Abandonment::DontCare</a> = Bit0, 
<a class="el" href="group__modm__architecture__assert.html#ggaf22c76f51642c50723ba439c5e080726afd038fc7f319e48f3115d92bf5bdbef9">modm::Abandonment::Ignore</a> = Bit1, 
<a class="el" href="group__modm__architecture__assert.html#ggaf22c76f51642c50723ba439c5e080726aceaa0734f0b3c738120c67344d8f3ec1">modm::Abandonment::Fail</a> = Bit2
 }</td></tr>
<tr class="separator:gaf22c76f51642c50723ba439c5e080726"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa114a8966a537091056c29be69128d7d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#gaa114a8966a537091056c29be69128d7d">modm_assert</a> (bool condition, const char *module, const char *location, const char *failure)</td></tr>
<tr class="separator:gaa114a8966a537091056c29be69128d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30f972d5576059fc223eb1103fe410d1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#ga30f972d5576059fc223eb1103fe410d1">modm_assert</a> (bool condition, const char *module, const char *location, const char *failure, uintptr_t context)</td></tr>
<tr class="separator:ga30f972d5576059fc223eb1103fe410d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5550f5d2d8e1c93ea54dab9b3ceece0b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#ga5550f5d2d8e1c93ea54dab9b3ceece0b">modm_assert_debug</a> (bool condition, const char *module, const char *location, const char *failure)</td></tr>
<tr class="separator:ga5550f5d2d8e1c93ea54dab9b3ceece0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc6fdce377db677c250069879e8b54d0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#gafc6fdce377db677c250069879e8b54d0">modm_assert_debug</a> (bool condition, const char *module, const char *location, const char *failure, uintptr_t context)</td></tr>
<tr class="separator:gafc6fdce377db677c250069879e8b54d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga167476628ef21d7f3c88a79d7a90b7a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modm__architecture__assert.html#ga167476628ef21d7f3c88a79d7a90b7a9">modm_abandon</a> (const char *module, const char *location, const char *failure, uintptr_t context) <a class="el" href="group__modm__architecture.html#gabcab3f4f9780bbcdf978319c34084eb9">modm_weak</a></td></tr>
<tr class="separator:ga167476628ef21d7f3c88a79d7a90b7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions allow you to assert a condition at runtime and define failure handlers in your application that can decide what to do with this assertion and provide custom functionality.</p>
<p>Each assertion has the form <code>modm_assert(condition, module, location, failure)</code>, where the condition is a boolean and rest are strings, so that a simple string compare can be used to match for module, location or failure. For example, the identifier <code>"can", "init", "timeout"</code> describes a timeout failure in the CAN initializer function. The assert <code>modm_assert_debug(condition, module, location, failure)</code> is only available on debug builds and is removed from the code for a release build.</p>
<p>The user can define one or multiple assertion handlers in any part of the application using the <code><a class="el" href="group__modm__architecture__assert.html#ga16bc9b4ebefe47d1417ec75f99b30ee6">MODM_ASSERTION_HANDLER(function)</a></code> macro. All assertion handlers will be executed when an assertion fails anywhere in the code and get passed the identifier string.</p>
<dl class="section note"><dt>Note</dt><dd>The order of assertion handler execution is undefined and must not been relied upon for any functionality!</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Assertion handlers may be executed in interrupt context!</dd></dl>
<p>Depending on the information in the failure identifier, the assertion handler returns <code>Abandonment::DontCare</code> if the failure is not of interest, or <code>Abandonment::Ignore</code> for recoverable failures, or <code>Abandonment::Fail</code> for failures that do not allow normal program continuation. The program is aborted, if any assertion handler returns <code>Abandonment::Fail</code>, all assertion handlers return <code>Abandonment::DontCare</code> or no assertion handlers have been defined in the application. Only if one or many assertion handlers return <code>Abandonment::Ignore</code> and the remainder returns <code>Abandonment::DontCare</code>, only then is the assertion ignored.</p>
<dl class="section note"><dt>Note</dt><dd>It is intended that the assertion handlers do not block (forever), so that all assertion handlers can get called.</dd></dl>
<p>On program abandonment <code>modm_abandon(module, location, failure)</code> is called, which exits the program silently by default. Only on hosted an formatted error string is output by default. It is therefore recommended to overwrite this function on embedded targets for custom behavior like blinking an LED and printing to a serial connection.</p>
<dl class="section warning"><dt>Warning</dt><dd>The abandonment handler may also be executed in interrupt context! </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga16bc9b4ebefe47d1417ec75f99b30ee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16bc9b4ebefe47d1417ec75f99b30ee6">&#9670;&nbsp;</a></span>MODM_ASSERTION_HANDLER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MODM_ASSERTION_HANDLER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">handler</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This adds a function to the list of assertion handlers to execute on assertion failure. Note that this macro does not give you any influence over the order of handler execution on assertion failure. Do not write assertion handlers that depend on any ordered execution!</p>
<dl class="section warning"><dt>Warning</dt><dd>On AVR targets the failure identifier resides in Flash memory!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>A function of signature <code>AssertionHandler</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga7737b85c4054dc754b61bf0da7c165fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7737b85c4054dc754b61bf0da7c165fe">&#9670;&nbsp;</a></span>AssertionHandler</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="group__modm__architecture__assert.html#ga7737b85c4054dc754b61bf0da7c165fe">modm::AssertionHandler</a> = typedef <a class="el" href="group__modm__architecture__assert.html#gaf22c76f51642c50723ba439c5e080726">Abandonment</a> (*)(const char * module, const char * location, const char * failure, uintptr_t context)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signature of the assertion handlers </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaf22c76f51642c50723ba439c5e080726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf22c76f51642c50723ba439c5e080726">&#9670;&nbsp;</a></span>Abandonment</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__modm__architecture__assert.html#gaf22c76f51642c50723ba439c5e080726">modm::Abandonment</a> : uint8_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Describes abandonment type of assertions. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf22c76f51642c50723ba439c5e080726a60a3629ef6a8f991f45d7a85f2458544"></a>DontCare&#160;</td><td class="fielddoc"><p>Do not care about failure. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf22c76f51642c50723ba439c5e080726afd038fc7f319e48f3115d92bf5bdbef9"></a>Ignore&#160;</td><td class="fielddoc"><p>Safe to ignore this failure. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf22c76f51642c50723ba439c5e080726aceaa0734f0b3c738120c67344d8f3ec1"></a>Fail&#160;</td><td class="fielddoc"><p>This failure is reason for abandonment. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga167476628ef21d7f3c88a79d7a90b7a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga167476628ef21d7f3c88a79d7a90b7a9">&#9670;&nbsp;</a></span>modm_abandon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void modm_abandon </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>failure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Overwriteable abandonment handler for all targets.</p>
<p>You should overwrite this handler for custom failure behaviour like blinking LEDs and outputting the failure string via a serial connection. </p>

</div>
</div>
<a id="gaa114a8966a537091056c29be69128d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa114a8966a537091056c29be69128d7d">&#9670;&nbsp;</a></span>modm_assert() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modm_assert </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>failure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assert a condition to be true with failure identifier. This assert is always included in the source code. </p><dl class="section return"><dt>Returns</dt><dd>result of condition evaluation</dd></dl>
<dl class="section note"><dt>Note</dt><dd>On AVR targets the failure identifier string is placed in Flash memory! </dd></dl>

</div>
</div>
<a id="ga30f972d5576059fc223eb1103fe410d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30f972d5576059fc223eb1103fe410d1">&#9670;&nbsp;</a></span>modm_assert() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modm_assert </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>failure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assert a condition to be true with failure identifier and context. This assert is always included in the source code. </p><dl class="section return"><dt>Returns</dt><dd>result of condition evaluation</dd></dl>
<dl class="section note"><dt>Note</dt><dd>On AVR targets the failure identifier string is placed in Flash memory! </dd></dl>

</div>
</div>
<a id="ga5550f5d2d8e1c93ea54dab9b3ceece0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5550f5d2d8e1c93ea54dab9b3ceece0b">&#9670;&nbsp;</a></span>modm_assert_debug() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modm_assert_debug </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>failure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assert a condition to be true with failure identifier. This assert is only triggered in the source code on debug builds! </p><dl class="section return"><dt>Returns</dt><dd>result of condition evaluation</dd></dl>
<dl class="section note"><dt>Note</dt><dd>On AVR targets the strings are placed in Flash memory! </dd></dl>

</div>
</div>
<a id="gafc6fdce377db677c250069879e8b54d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc6fdce377db677c250069879e8b54d0">&#9670;&nbsp;</a></span>modm_assert_debug() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modm_assert_debug </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>failure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assert a condition to be true with failure identifier and context. This assert is only triggered in the source code on debug builds! </p><dl class="section return"><dt>Returns</dt><dd>result of condition evaluation</dd></dl>
<dl class="section note"><dt>Note</dt><dd>On AVR targets the strings are placed in Flash memory! </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
