<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>modm: CMake Build Script Generator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">modm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CMake Build Script Generator<div class="ingroups"><a class="el" href="group__modm__build.html">Build System Generators</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for CMake Build Script Generator:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__modm__build__cmake.png" border="0" alt="" usemap="#group____modm____build____cmake"/>
<map name="group____modm____build____cmake" id="group____modm____build____cmake">
<area shape="rect" id="node2" href="group__modm__build.html" title="Build System Generators" alt="" coords="5,13,173,39"/>
</map>
</td></tr></table></center>
</div>
<p><a href="http://cmake.org">CMake</a> is a widely used build tool supported by almost every IDE.</p>
<p>This module generates three files:</p>
<ul>
<li>a <code>modm/repo.cmake</code> file: configures all required CMake tools with the right settings (also using information from the <code>modm:build</code> module) to compile the modm library.</li>
<li>a top-level <code>CMakeLists.txt</code>: configures CMake to build modm and your application.</li>
<li>a top-level <code>Makefile</code>: provides a convenience wrapper for calling CMake from the command line.</li>
</ul>
<p>This module is intended to be used for integration with IDEs that natively only support CMake. It therefore only provides the bare minimum of features to compile and upload your application to your target. For additional build tools features see the <code>modm:build:scons</code> module.</p>
<h2>Make Methods</h2>
<p>The <code>Makefile</code> wrapper provides these convenience methods.</p>
<h4>make cmake</h4>
<p>Generates the CMake build folders and initializes the build system.</p>
<div class="fragment"><div class="line"> $ make cmake</div><div class="line">    ...</div><div class="line">-- Configuring done</div><div class="line">-- Generating done</div><div class="line">-- Build files have been written to: build/{project.name}/cmake-build-release</div><div class="line">    ...</div><div class="line">-- Build files have been written to: build/{project.name}/cmake-build-<a class="code" href="namespacemodm_1_1log.html#ae9143446ab426d7e3ebf45751c11e66a">debug</a></div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>"You must call this once before you can build!" If you forget to call this first, the build will fail with this error message:</dd></dl>
<p>~~~ $ make build-release Error: build/cmake-build-release is not a directory make: *** [build-release] Error 1 ~~~</p>
<h4>make build-release</h4>
<h4>make build-debug</h4>
<p>Compiles your application into an executable using the release or debug profile.</p>
<div class="fragment"><div class="line"> $ make build-release</div><div class="line">Scanning dependencies of target blink_cmake</div><div class="line">[  3%] Building C <span class="keywordtype">object</span> CMakeFiles/blink_cmake.dir/<a class="code" href="namespacemodm.html">modm</a>/ext/cmsis/device/peripherals.c.o</div><div class="line">[  7%] Building CXX <span class="keywordtype">object</span> CMakeFiles/blink_cmake.dir/<a class="code" href="namespacemodm.html">modm</a>/src/<a class="code" href="namespacemodm.html">modm</a>/architecture/driver/atomic/flag.cpp.o</div><div class="line">[ 19%] Building CXX <span class="keywordtype">object</span> CMakeFiles/blink_cmake.dir/<a class="code" href="namespacemodm.html">modm</a>/src/<a class="code" href="namespacemodm.html">modm</a>/board/board.cpp.o</div><div class="line">    ...</div><div class="line">[ 96%] Building CXX <span class="keywordtype">object</span> CMakeFiles/blink_cmake.dir/main.cpp.o</div><div class="line">[100%] Linking CXX executable blink_cmake.elf</div><div class="line">   text    data     bss     dec     <a class="code" href="group__modm__io.html#gaf61485290089e35ac0a897af1c37d4f0">hex</a> filename</div><div class="line">   1596      52   20468   22116    5664 blink_cmake.elf</div><div class="line">[100%] Built target blink_cmake.<a class="code" href="classmodm_1_1_i_o_stream.html#a2ec24a2c020997b5704df1d9ac99264c">bin</a></div><div class="line">[100%] Built target blink_cmake.<a class="code" href="classmodm_1_1_i_o_stream.html#a067f916e909f11b5c149d72a27d60b16">hex</a></div><div class="line">[100%] Built target blink_cmake.lss</div></div><!-- fragment --><h4>make upload-release</h4>
<h4>make upload-debug</h4>
<p>Writes the executable onto your target via AvrDude or OpenOCD. This is a convenience wrapper around the programming options and methods defined in the <code>modm:build</code> module. (* <em>only AVR and ARM Cortex-M targets</em>)</p>
<div class="fragment"><div class="line"> $ make upload-release</div><div class="line">[100%] Built target blink_cmake</div><div class="line">[100%] Built target blink_cmake.bin</div><div class="line">[100%] Built target blink_cmake.hex</div><div class="line">[100%] Built target blink_cmake.lss</div><div class="line">Open On-Chip Debugger 0.10.0</div><div class="line">    ...</div><div class="line">Info : <span class="keyword">using</span> stlink api v2</div><div class="line">Info : Target voltage: 3.171034</div><div class="line">Info : stm32f1x.cpu: hardware has 6 breakpoints, 4 watchpoints</div><div class="line">    ...</div><div class="line">   Programming Started **</div><div class="line"><span class="keyword">auto</span> erase enabled</div><div class="line">Info : device <span class="keywordtype">id</span> = 0x20036410</div><div class="line">Info : flash size = 64kbytes</div><div class="line">    ...</div><div class="line">wrote 2048 bytes from file build/cmake-build-release/blink_cmake.elf in 0.187893s (10.644 KiB/s)</div><div class="line">   Programming Finished **</div><div class="line">   Verify Started **</div><div class="line">verified 1652 bytes in 0.104584s (15.426 KiB/s)</div><div class="line">   Verified OK **</div><div class="line">shutdown command invoked</div></div><!-- fragment --><h4>make gdb</h4>
<h4>make gdb-release</h4>
<p>Launches GDB with the debug or release executable. This is just a convenience wrapper for the debug functionality defined in the <code>modm:build</code> module. (* <em>only ARM Cortex-M targets</em>)</p>
<p>OpenOCD must already be running in the background**. Launch it by manually calling <code>make openocd</code> in another terminal.</p>
<h4>make openocd</h4>
<p>Starts OpenOCD with the modm specific configuration.</p>
<h4>make clean</h4>
<p>Removes the CMake build artifacts.</p>
<h4>make cleanall</h4>
<p>Removes the entire build folder. You must then first call <code>make cmake</code> before being able to build again.</p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
