<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>modm: System Clock</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">modm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">System Clock<div class="ingroups"><a class="el" href="group__modm__architecture.html">Architecture Interfaces</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for System Clock:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__modm__architecture__clock.png" border="0" alt="" usemap="#group____modm____architecture____clock"/>
<map name="group____modm____architecture____clock" id="group____modm____architecture____clock">
<area shape="rect" id="node2" href="group__modm__architecture.html" title="Architecture Interfaces" alt="" coords="5,5,160,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmodm_1_1chrono_1_1milli__clock.html">modm::chrono::milli_clock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmodm_1_1chrono_1_1micro__clock.html">modm::chrono::micro_clock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>lbuild module: <code>modm:architecture:clock</code></p>
<p>To provide a system-wide time base this module provides two clocks:</p>
<ul>
<li><code><a class="el" href="namespacemodm.html#aea867c6a43c2d9ad11a0c4e2808a5f2c">modm::Clock</a></code>: a 32-bit unsigned millisecond clock running for approx. 49 days until wrap around, as an optimized replacement of <code>std::chrono::system_clock</code>.</li>
<li><code><a class="el" href="namespacemodm.html#a0fbdeec9cb2bbb049c6bf1627a927e46">modm::PreciseClock</a></code>: a 32-bit unsigned microsecond clock running for approx. 71 minutes until wrap around, as an optimized replacement of <code>std::chrono::high_resolution_clock</code>.</li>
</ul>
<p>These clocks are intended to measure time intervals:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> start = <a class="code" href="structmodm_1_1chrono_1_1micro__clock.html#a8d7f08e064a24fc677cd9714a530962b">modm::PreciseClock::now</a>();</div><div class="line">how_long_does_this_function_take();</div><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> duration = <a class="code" href="structmodm_1_1chrono_1_1micro__clock.html#a8d7f08e064a24fc677cd9714a530962b">modm::PreciseClock::now</a>() - start;</div><div class="line"><a class="code" href="group__modm__debug.html#ga31bd6931a8999d2c639cc8c4f0c6b3d0">MODM_LOG_DEBUG</a> &lt;&lt; <span class="stringliteral">&quot;Function took &quot;</span> &lt;&lt; duration &lt;&lt; <a class="code" href="group__modm__io.html#ga25d1ec416bcd6a8b8d1d280c99fd2d55">modm::endl</a>;</div></div><!-- fragment --><p>For additional common timeout and periodic timer use-cases also check out the <code>modm:processing:timer</code> module which uses these clocks.</p>
<h2>Limitations</h2>
<p>The clocks intended to be very lightweight to use, however, a few interface tradeoffs had to be made to achieve this goal.</p>
<ol type="1">
<li>The clocks are <b>not steady</b> with their 32-bit counters overflowing after a relatively short time. They must therefore only be used for measuring intervals, not absolute time.</li>
<li>The clocks have <em>unsigned</em> durations to make it easy to work with intervals since the addition/subtraction of intervals works just fine on clocks wrapping around, on the important condition that the interval is shorter than the clocks wrap around time.</li>
</ol>
<dl class="section warning"><dt>Warning</dt><dd>"Use a RTC-backed calendar for timekeeping!" These clocks are definitely not accurate over long periods of time, since they are based on the internal clock supplies, which may have significant drift and thus are no replacement for a Real-Time Clock!</dd></dl>
<p>Also check the <code>modm:platform:clock</code> module descriptions for additional limitations on clock resolution and clock drift depending on target. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
