!!! warning "These module docs are in beta and may be incomplete."

# modm:architecture:assert: Assertions

These functions allow you to assert a condition at runtime and define
failure handlers in your application that can decide what to do with this
assertion and provide custom functionality.

Each assertion has the form `modm_assert(condition, module, location, failure)`,
where the condition is a boolean and rest are strings, so that a simple
string compare can be used to match for module, location or failure.
For example, the identifier `"can", "init", "timeout"` describes a timeout
failure in the CAN initializer function.
The assert `modm_assert_debug(condition, module, location, failure)` is only
available on debug builds and is removed from the code for a release build.

The user can define one or multiple assertion handlers in any part of the
application using the `MODM_ASSERTION_HANDLER(function)` macro.
All assertion handlers will be executed when an assertion fails anywhere in
the code and get passed the identifier string.

!!!note
	The order of assertion handler execution is undefined and must not been
	relied upon for any functionality!

!!!warning
	Assertion handlers may be executed in interrupt context!

Depending on the information in the failure identifier, the assertion handler
returns `Abandonment::DontCare` if the failure is not of interest, or
`Abandonment::Ignore` for recoverable failures, or `Abandonment::Fail` for
failures that do not allow normal program continuation.
The program is aborted, if any assertion handler returns `Abandonment::Fail`,
all assertion handlers return `Abandonment::DontCare` or no assertion
handlers have been defined in the application.
Only if one or many assertion handlers return `Abandonment::Ignore` and the
remainder returns `Abandonment::DontCare`, only then is the assertion ignored.

!!!note
	It is intended that the assertion handlers do not block (forever), so that
	all assertion handlers can get called.

On program abandonment `modm_abandon(module, location, failure)` is called,
which exits the program silently by default.
Only on hosted an formatted error string is output by default.
It is therefore recommended to overwrite this function on embedded targets
for custom behavior like blinking an LED and printing to a serial connection.

!!!warning
	The abandonment handler may also be executed in interrupt context!

## Content

```cpp
// Function
bool modm_assert(bool condition, const char *module, const char *location, const char *failure);
bool modm_assert(bool condition, const char *module, const char *location, const char *failure, uintptr_t context);
bool modm_assert_debug(bool condition, const char *module, const char *location, const char *failure);
bool modm_assert_debug(bool condition, const char *module, const char *location, const char *failure, uintptr_t context);
void modm_abandon(const char *module, const char *location, const char *failure, uintptr_t context) modm_weak;
// Enum
enum class Abandonment;
// Typedef
using modm::AssertionHandler = typedef Abandonment (*)(const char * module, const char * location, const char * failure, uintptr_t context);
// Define
#define MODM_ASSERTION_HANDLER(handler)
```
## Dependencies

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (0)
 -->
<!-- Title: modm:architecture:assert Pages: 1 -->
<svg width="346pt" height="239pt"
 viewBox="0.00 0.00 345.50 239.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 235)">
<title>modm:architecture:assert</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-235 341.5,-235 341.5,4 -4,4"/>
<!-- modm_architecture_assert -->
<g id="node1" class="node">
<title>modm_architecture_assert</title>
<polygon fill="#d3d3d3" stroke="#000000" stroke-width="2" points="234,-142 124,-142 124,-89 234,-89 234,-142"/>
<text text-anchor="middle" x="179" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="179" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">architecture:</text>
<text text-anchor="middle" x="179" y="-96.8" font-family="Times,serif" font-size="14.00" fill="#000000">assert</text>
</g>
<!-- modm_architecture -->
<g id="node2" class="node">
<title>modm_architecture</title>
<g id="a_node2"><a xlink:href="../modm-architecture" xlink:title="modm:&#10;architecture">
<polygon fill="#d3d3d3" stroke="#000000" points="106,-223.5 0,-223.5 0,-185.5 106,-185.5 106,-223.5"/>
<text text-anchor="middle" x="53" y="-208.3" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="53" y="-193.3" font-family="Times,serif" font-size="14.00" fill="#000000">architecture</text>
</a>
</g>
</g>
<!-- modm_architecture_assert&#45;&gt;modm_architecture -->
<g id="edge1" class="edge">
<title>modm_architecture_assert&#45;&gt;modm_architecture</title>
<path fill="none" stroke="#000000" d="M141.1958,-142.2029C124.4057,-154.0626 104.757,-167.9415 88.2723,-179.5855"/>
<polygon fill="#000000" stroke="#000000" points="86.1208,-176.82 79.9722,-185.4482 90.1594,-182.5376 86.1208,-176.82"/>
</g>
<!-- modm_architecture_accessor -->
<g id="node3" class="node">
<title>modm_architecture_accessor</title>
<g id="a_node3"><a xlink:href="../modm-architecture-accessor" xlink:title="modm:&#10;architecture:&#10;accessor">
<polygon fill="#d3d3d3" stroke="#000000" points="234,-231 124,-231 124,-178 234,-178 234,-231"/>
<text text-anchor="middle" x="179" y="-215.8" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="179" y="-200.8" font-family="Times,serif" font-size="14.00" fill="#000000">architecture:</text>
<text text-anchor="middle" x="179" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">accessor</text>
</a>
</g>
</g>
<!-- modm_architecture_assert&#45;&gt;modm_architecture_accessor -->
<g id="edge2" class="edge">
<title>modm_architecture_assert&#45;&gt;modm_architecture_accessor</title>
<path fill="none" stroke="#000000" d="M179,-142.2029C179,-150.2113 179,-159.1403 179,-167.6802"/>
<polygon fill="#000000" stroke="#000000" points="175.5001,-167.8159 179,-177.8159 182.5001,-167.8159 175.5001,-167.8159"/>
</g>
<!-- modm_math_utils -->
<g id="node4" class="node">
<title>modm_math_utils</title>
<g id="a_node4"><a xlink:href="../modm-math-utils" xlink:title="modm:&#10;math:&#10;utils">
<polygon fill="#d3d3d3" stroke="#000000" points="317.5,-231 252.5,-231 252.5,-178 317.5,-178 317.5,-231"/>
<text text-anchor="middle" x="285" y="-215.8" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="285" y="-200.8" font-family="Times,serif" font-size="14.00" fill="#000000">math:</text>
<text text-anchor="middle" x="285" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">utils</text>
</a>
</g>
</g>
<!-- modm_architecture_assert&#45;&gt;modm_math_utils -->
<g id="edge3" class="edge">
<title>modm_architecture_assert&#45;&gt;modm_math_utils</title>
<path fill="none" stroke="#000000" d="M210.8035,-142.2029C221.7041,-151.3553 234.0369,-161.7102 245.4733,-171.3125"/>
<polygon fill="#000000" stroke="#000000" points="243.3099,-174.0661 253.219,-177.8159 247.811,-168.7052 243.3099,-174.0661"/>
</g>
<!-- modm_platform_can -->
<g id="node5" class="node">
<title>modm_platform_can</title>
<g id="a_node5"><a xlink:href="../modm-platform-can" xlink:title="modm:&#10;platform:&#10;can">
<polygon fill="#d3d3d3" stroke="#000000" points="119.5,-53 36.5,-53 36.5,0 119.5,0 119.5,-53"/>
<text text-anchor="middle" x="78" y="-37.8" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="78" y="-22.8" font-family="Times,serif" font-size="14.00" fill="#000000">platform:</text>
<text text-anchor="middle" x="78" y="-7.8" font-family="Times,serif" font-size="14.00" fill="#000000">can</text>
</a>
</g>
</g>
<!-- modm_platform_can&#45;&gt;modm_architecture_assert -->
<g id="edge4" class="edge">
<title>modm_platform_can&#45;&gt;modm_architecture_assert</title>
<path fill="none" stroke="#000000" d="M108.3033,-53.2029C118.5899,-62.2673 130.215,-72.5112 141.0232,-82.0353"/>
<polygon fill="#000000" stroke="#000000" points="138.9014,-84.8305 148.7181,-88.8159 143.5293,-79.5786 138.9014,-84.8305"/>
</g>
<!-- modm_platform_cortex_m -->
<g id="node6" class="node">
<title>modm_platform_cortex_m</title>
<g id="a_node6"><a xlink:href="../modm-platform-cortex-m" xlink:title="modm:&#10;platform:&#10;cortex&#45;m">
<polygon fill="#d3d3d3" stroke="#000000" points="220.5,-53 137.5,-53 137.5,0 220.5,0 220.5,-53"/>
<text text-anchor="middle" x="179" y="-37.8" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="179" y="-22.8" font-family="Times,serif" font-size="14.00" fill="#000000">platform:</text>
<text text-anchor="middle" x="179" y="-7.8" font-family="Times,serif" font-size="14.00" fill="#000000">cortex&#45;m</text>
</a>
</g>
</g>
<!-- modm_platform_cortex_m&#45;&gt;modm_architecture_assert -->
<g id="edge5" class="edge">
<title>modm_platform_cortex_m&#45;&gt;modm_architecture_assert</title>
<path fill="none" stroke="#000000" d="M179,-53.2029C179,-61.2113 179,-70.1403 179,-78.6802"/>
<polygon fill="#000000" stroke="#000000" points="175.5001,-78.8159 179,-88.8159 182.5001,-78.8159 175.5001,-78.8159"/>
</g>
<!-- modm_processing_resumable -->
<g id="node7" class="node">
<title>modm_processing_resumable</title>
<g id="a_node7"><a xlink:href="../modm-processing-resumable" xlink:title="modm:&#10;processing:&#10;resumable">
<polygon fill="#d3d3d3" stroke="#000000" points="337.5,-53 238.5,-53 238.5,0 337.5,0 337.5,-53"/>
<text text-anchor="middle" x="288" y="-37.8" font-family="Times,serif" font-size="14.00" fill="#000000">modm:</text>
<text text-anchor="middle" x="288" y="-22.8" font-family="Times,serif" font-size="14.00" fill="#000000">processing:</text>
<text text-anchor="middle" x="288" y="-7.8" font-family="Times,serif" font-size="14.00" fill="#000000">resumable</text>
</a>
</g>
</g>
<!-- modm_processing_resumable&#45;&gt;modm_architecture_assert -->
<g id="edge6" class="edge">
<title>modm_processing_resumable&#45;&gt;modm_architecture_assert</title>
<path fill="none" stroke="#000000" d="M255.2964,-53.2029C244.0873,-62.3553 231.4054,-72.7102 219.6454,-82.3125"/>
<polygon fill="#000000" stroke="#000000" points="217.2128,-79.7802 211.6805,-88.8159 221.6401,-85.2023 217.2128,-79.7802"/>
</g>
</g>
</svg>

